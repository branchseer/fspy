use std::{ffi::OsStr, os::windows::ffi::OsStrExt, ptr::null_mut};

use winapi::um::{fileapi::{CreateFileW, OPEN_EXISTING}, winnt::{FILE_ATTRIBUTE_NORMAL, GENERIC_READ}};
use winsafe::GetLastError;

fn main() {
    let path = OsStr::new("yyyyy/zzzzz");

    let mut path = path.encode_wide().collect::<Vec<u16>>();
    path.push(0);

    unsafe { 
        CreateFileW(path.as_mut_ptr(), GENERIC_READ, 0, null_mut(), OPEN_EXISTING, FILE_ATTRIBUTE_NORMAL, null_mut())
    };
    dbg!(GetLastError());
}
